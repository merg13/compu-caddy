import{R as N,j as e}from"./index-XODFVYDb.js";import{a$ as u,b0 as f,b1 as p,b2 as y,b3 as w,b4 as A,b5 as R}from"./CartesianChart-CPVXax2L.js";import{B as D}from"./BarChart-DJrB_QHE.js";import{T as C}from"./trash-2-QJWu8XVb.js";function T({stats:d,holeScores:i,rounds:l,courses:m,deleteRound:h,showNotification:o}){const[c,x]=N.useState(null),g=async s=>{if(confirm("Delete this round?"))try{await h(s),o("Round deleted","success")}catch{o("Error deleting round","error")}},j=s=>{x(s.hole)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"Advanced Analytics"}),e.jsxs("div",{className:"grid md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"FIR Percentage"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[d.firPct.toFixed(1),"%"]}),e.jsx("div",{className:"mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-600 transition-all",style:{width:`${d.firPct}%`}})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Avg Putts/Round"}),e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:(d.puttingAvg*18).toFixed(1)}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[d.puttingAvg.toFixed(2)," per hole"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"Best Round"}),e.jsx("div",{className:"text-2xl font-bold text-green-600",children:l.length>0?Math.min(...l.map(s=>s.totalScore)):"N/A"}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["Worst: ",l.length>0?Math.max(...l.map(s=>s.totalScore)):"N/A"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-2",children:"3-Putt Rate"}),e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:[(i.filter(s=>s.putts>=3).length/Math.max(i.length,1)*100).toFixed(1),"%"]})]})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Hole-by-Hole Performance (All Courses)"}),e.jsx(u,{width:"100%",height:300,children:e.jsxs(D,{data:Array.from({length:18},(s,t)=>{const a=t+1,r=i.filter(n=>n.holeNumber===a),b=r.length>0?r.reduce((n,v)=>n+v.score,0)/r.length:0;return{hole:a,avgScore:parseFloat(b.toFixed(2))}}),children:[e.jsx(f,{strokeDasharray:"3 3"}),e.jsx(p,{dataKey:"hole"}),e.jsx(y,{domain:[0,6]}),e.jsx(w,{}),e.jsx(A,{}),e.jsx(R,{dataKey:"avgScore",fill:"#3b82f6",onClick:j})]})})]}),c&&e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:["Hole ",c," Details"]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Score Distribution"}),e.jsx("div",{className:"space-y-1",children:Array.from({length:8},(s,t)=>t+2).map(s=>{const t=i.filter(a=>a.holeNumber===c&&a.score===s).length;return e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:[s," strokes"]}),e.jsxs("span",{children:[t," times"]})]},s)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Recent Scores"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:i.filter(s=>s.holeNumber===c).slice(-5).reverse().map((s,t)=>{var a;return e.jsxs("div",{className:"text-sm",children:[new Date(((a=l.find(r=>r.id===s.roundId))==null?void 0:a.date)||"").toLocaleDateString(),": ",s.score]},t)})})]})]}),e.jsx("button",{onClick:()=>x(null),className:"mt-4 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600",children:"Close Details"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-lg shadow",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Recent Rounds"}),e.jsx("div",{className:"space-y-2",children:l.slice(-10).reverse().map(s=>{const t=m.find(a=>a.id===s.courseId);return e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:(t==null?void 0:t.name)||"Unknown Course"}),e.jsxs("div",{className:"text-sm text-gray-600",children:[new Date(s.date).toLocaleDateString()," Â· ",s.teeBox]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`text-xl font-bold ${s.scoreToPar<=0?"text-green-600":s.scoreToPar<=5?"text-blue-600":"text-orange-600"}`,children:s.totalScore}),e.jsxs("div",{className:"text-sm text-gray-600",children:[s.scoreToPar>=0?"+":"",s.scoreToPar]}),e.jsx("button",{onClick:()=>g(s.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg",children:e.jsx(C,{size:16})})]})]},s.id)})})]})]})}export{T as default};
