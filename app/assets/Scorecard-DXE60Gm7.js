import{c as I,r as x,j as t,X as V}from"./index-XODFVYDb.js";import{S as X}from"./save-DZWpcdgn.js";/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],J=I("chevron-left",G);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],K=I("chevron-right",H);/**
 * @license lucide-react v0.553.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],W=I("mic",Q);function ee({course:u,onSave:$,onCancel:k,existingRound:v}){var D,P,E,B;const[o,b]=x.useState(1),[h,N]=x.useState({date:new Date().toISOString().split("T")[0],teeBox:((P=(D=u.teeBoxes)==null?void 0:D[0])==null?void 0:P.name)||"Blue",weather:"",playingPartners:""}),[g,T]=x.useState((v==null?void 0:v.holeScores)||Array.from({length:18},(e,a)=>({holeNumber:a+1,score:null,putts:null,fairwayHit:"n/a",greenInRegulation:!1,penaltyStrokes:0}))),[C,L]=x.useState(null),[M,R]=x.useState(null),[c,i]=x.useState(null),[p,d]=x.useState(!1),[_,w]=x.useState(!1);x.useEffect(()=>{const e=localStorage.getItem("scorecard-draft");if(e)try{const a=JSON.parse(e);a.courseId===u.id&&!v&&(N(a.roundData),T(a.holeScores))}catch{}},[u.id,v]),x.useEffect(()=>{const e=setInterval(()=>{const a={courseId:u.id,roundData:h,holeScores:g,timestamp:Date.now()};localStorage.setItem("scorecard-draft",JSON.stringify(a))},3e4);return()=>clearInterval(e)},[u.id,h,g]);const s=g[o-1],n=(E=u.holes)==null?void 0:E[o-1],y=()=>{var e;return(e=u.teeBoxes)==null?void 0:e.find(a=>a.name===h.teeBox)},U=()=>n!=null&&n.yardages?y()?n.yardages.championship||n.yardages.regular||0:n.yardages.regular||0:0,l=(e,a)=>{const m=[...g];m[o-1]={...m[o-1],[e]:a},T(m)},r=()=>{"vibrate"in navigator&&navigator.vibrate(50)},z=e=>{R(null),L(e.targetTouches[0].clientX)},A=e=>{R(e.targetTouches[0].clientX)},F=()=>{if(!C||!M)return;const e=C-M,a=e>50,m=e<-50;a&&o<18&&(b(o+1),r()),m&&o>1&&(b(o-1),r())},Y=()=>{if(!("webkitSpeechRecognition"in window)&&!("SpeechRecognition"in window)){alert("Voice input not supported in this browser");return}const e=window.SpeechRecognition||window.webkitSpeechRecognition,a=new e;a.lang="en-US",a.interimResults=!1,a.maxAlternatives=1,a.onstart=()=>{w(!0)},a.onresult=m=>{const f=m.results[0][0].transcript.toLowerCase().match(/\d+/);if(f){const S=parseInt(f[0]);S>=1&&S<=15&&(l("score",S),r())}},a.onend=()=>{w(!1)},a.onerror=()=>{w(!1)},a.start()},O=()=>{var m;const e=g.reduce((j,f)=>j+(f.score||0),0),a=((m=u.holes)==null?void 0:m.reduce((j,f)=>j+f.par,0))||72;$({...h,totalScore:e,scoreToPar:e-a,differential:e-a,holeScores:g},u)};return t.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 landscape:flex landscape:flex-row landscape:gap-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-6",children:[t.jsx("h2",{className:"text-2xl font-bold",children:u.name}),t.jsx("button",{onClick:k,className:"text-gray-500 hover:text-gray-700","aria-label":"Close scorecard",children:t.jsx(V,{size:24})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Date"}),t.jsx("input",{type:"date",value:h.date,onChange:e=>N({...h,date:e.target.value}),className:"w-full px-3 py-2 border rounded-lg"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-1",children:"Tee Box"}),t.jsx("select",{value:h.teeBox,onChange:e=>N({...h,teeBox:e.target.value}),className:"w-full px-3 py-2 border rounded-lg",children:(B=u.teeBoxes)==null?void 0:B.map(e=>t.jsxs("option",{value:e.name,children:[e.name," - Rating: ",e.rating,", Slope: ",e.slope,", ",e.totalYards," yards"]},e.name))})]})]}),t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",onKeyDown:e=>{e.key==="ArrowLeft"&&o>1?b(o-1):e.key==="ArrowRight"&&o<18&&b(o+1)},onTouchStart:z,onTouchMove:A,onTouchEnd:F,tabIndex:0,role:"region","aria-label":"Hole navigation",style:{touchAction:"pan-y"},children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("button",{onClick:()=>{b(Math.max(1,o-1)),r()},disabled:o===1,className:"p-2 rounded-lg hover:bg-gray-200 disabled:opacity-50","aria-label":"Previous hole",children:t.jsx(J,{size:24})}),t.jsxs("div",{className:"text-center",children:[t.jsxs("div",{className:"text-2xl font-bold",children:["Hole ",o]}),t.jsxs("div",{className:"text-sm text-gray-600",children:["Par ",(n==null?void 0:n.par)||4," • ",U()," yards"]}),y()&&t.jsxs("div",{className:"text-xs text-blue-600",children:[y().name," Tee • Rating: ",y().rating]})]}),t.jsx("button",{onClick:()=>{b(Math.min(18,o+1)),r()},disabled:o===18,className:"p-2 rounded-lg hover:bg-gray-200 disabled:opacity-50","aria-label":"Next hole",children:t.jsx(K,{size:24})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Score"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onTouchStart:()=>{const e=setInterval(()=>{l("score",(s.score||0)-1),r()},200);i(e),d(!0)},onTouchEnd:()=>{c&&clearInterval(c),i(null),d(!1),p||(l("score",(s.score||0)-1),r())},onMouseDown:()=>{const e=setInterval(()=>{l("score",(s.score||0)-1),r()},200);i(e),d(!0)},onMouseUp:()=>{c&&clearInterval(c),i(null),d(!1),p||(l("score",(s.score||0)-1),r())},className:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600","aria-label":"Decrease score",children:"-"}),t.jsx("input",{type:"number",value:s.score||"",onChange:e=>l("score",parseInt(e.target.value)||null),className:"flex-1 px-4 py-3 text-2xl font-bold border rounded-lg text-center",min:"1",max:"15",inputMode:"numeric"}),t.jsx("button",{onClick:Y,className:`px-3 py-2 rounded-lg ${_?"bg-red-500 text-white":"bg-gray-500 text-white hover:bg-gray-600"}`,"aria-label":"Voice input for score",children:t.jsx(W,{size:16})}),t.jsx("button",{onTouchStart:()=>{const e=setInterval(()=>{l("score",(s.score||0)+1),r()},200);i(e),d(!0)},onTouchEnd:()=>{c&&clearInterval(c),i(null),d(!1),p||(l("score",(s.score||0)+1),r())},onMouseDown:()=>{const e=setInterval(()=>{l("score",(s.score||0)+1),r()},200);i(e),d(!0)},onMouseUp:()=>{c&&clearInterval(c),i(null),d(!1),p||(l("score",(s.score||0)+1),r())},className:"px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600","aria-label":"Increase score",children:"+"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Putts"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onTouchStart:()=>{const e=setInterval(()=>{l("putts",(s.putts||0)-1),r()},200);i(e),d(!0)},onTouchEnd:()=>{c&&clearInterval(c),i(null),d(!1),p||(l("putts",(s.putts||0)-1),r())},onMouseDown:()=>{const e=setInterval(()=>{l("putts",(s.putts||0)-1),r()},200);i(e),d(!0)},onMouseUp:()=>{c&&clearInterval(c),i(null),d(!1),p||(l("putts",(s.putts||0)-1),r())},className:"px-3 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600","aria-label":"Decrease putts",children:"-"}),t.jsx("input",{type:"number",value:s.putts||"",onChange:e=>l("putts",parseInt(e.target.value)||null),className:"flex-1 px-4 py-3 text-2xl font-bold border rounded-lg text-center",min:"0",max:"10",inputMode:"numeric"}),t.jsx("button",{onTouchStart:()=>{const e=setInterval(()=>{l("putts",(s.putts||0)+1),r()},200);i(e),d(!0)},onTouchEnd:()=>{c&&clearInterval(c),i(null),d(!1),p||(l("putts",(s.putts||0)+1),r())},onMouseDown:()=>{const e=setInterval(()=>{l("putts",(s.putts||0)+1),r()},200);i(e),d(!0)},onMouseUp:()=>{c&&clearInterval(c),i(null),d(!1),p||(l("putts",(s.putts||0)+1),r())},className:"px-3 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600","aria-label":"Increase putts",children:"+"})]})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Quick Scores"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:[{label:"Par",value:(n==null?void 0:n.par)||4},{label:"Birdie",value:((n==null?void 0:n.par)||4)-1},{label:"Bogey",value:((n==null?void 0:n.par)||4)+1},{label:"Double",value:((n==null?void 0:n.par)||4)+2}].map(e=>t.jsxs("button",{onClick:()=>{l("score",e.value),r()},className:"px-3 py-2 bg-blue-100 hover:bg-blue-200 rounded-lg text-sm font-medium",children:[e.label," (",e.value,")"]},e.label))})]}),(n==null?void 0:n.par)!==3&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Fairway"}),t.jsx("div",{className:"flex gap-2",role:"radiogroup","aria-label":"Fairway hit options",children:["yes","no","n/a"].map(e=>t.jsx("button",{onClick:()=>{l("fairwayHit",e),r()},className:`flex-1 py-2 rounded-lg ${s.fairwayHit===e?"bg-blue-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,role:"radio","aria-checked":s.fairwayHit===e,"aria-label":`Fairway ${e}`,children:e.toUpperCase()},e))})]}),t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("label",{className:"text-sm font-medium",children:"Green in Regulation"}),t.jsx("button",{onClick:()=>{l("greenInRegulation",!s.greenInRegulation),r()},className:`px-4 py-2 rounded-lg ${s.greenInRegulation?"bg-green-600 text-white":"bg-gray-200 hover:bg-gray-300"}`,"aria-label":`Green in regulation: ${s.greenInRegulation?"Yes":"No"}`,role:"switch","aria-checked":s.greenInRegulation,children:s.greenInRegulation?"Yes":"No"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium mb-2",children:"Penalty Strokes"}),t.jsx("input",{type:"number",value:s.penaltyStrokes,onChange:e=>l("penaltyStrokes",parseInt(e.target.value)||0),className:"w-full px-3 py-2 border rounded-lg",min:"0",max:"10",inputMode:"numeric"})]})]}),t.jsx("div",{className:"grid grid-cols-9 gap-2 mb-6",role:"tablist","aria-label":"Hole selection grid",children:g.map((e,a)=>t.jsxs("button",{onClick:()=>{b(a+1),r()},className:`aspect-square rounded-lg flex flex-col items-center justify-center text-sm ${o===a+1?"bg-blue-600 text-white":e.score?"bg-green-100 hover:bg-green-200":"bg-gray-100 hover:bg-gray-200"}`,role:"tab","aria-selected":o===a+1,"aria-label":`Hole ${a+1}${e.score?`, score ${e.score}`:", not scored"}`,children:[t.jsx("div",{className:"font-bold",children:a+1}),e.score&&t.jsx("div",{className:"text-xs",children:e.score})]},a))}),t.jsx("div",{className:"bg-blue-50 rounded-lg p-4 mb-6",children:t.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Total Score"}),t.jsx("div",{className:"text-2xl font-bold",children:g.reduce((e,a)=>e+(a.score||0),0)||"-"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"To Par"}),t.jsx("div",{className:"text-2xl font-bold",children:g.reduce((e,a)=>e+(a.score||0),0)?g.reduce((e,a)=>e+(a.score||0),0)-(u.par||72)>=0?"+"+(g.reduce((e,a)=>e+(a.score||0),0)-(u.par||72)):g.reduce((e,a)=>e+(a.score||0),0)-(u.par||72):"-"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-600",children:"Putts"}),t.jsx("div",{className:"text-2xl font-bold",children:g.reduce((e,a)=>e+(a.putts||0),0)||"-"})]})]})}),t.jsxs("div",{className:"flex gap-4",children:[t.jsxs("button",{onClick:()=>{O(),r()},className:"flex-1 px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700 flex items-center justify-center gap-2","aria-label":"Save the golf round",children:[t.jsx(X,{size:20}),"Save Round"]}),t.jsx("button",{onClick:k,className:"px-6 py-3 border border-gray-300 rounded-lg hover:bg-gray-50","aria-label":"Cancel and discard the round",children:"Cancel"})]})]})}export{ee as default};
